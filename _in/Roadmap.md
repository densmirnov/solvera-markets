# Intent Marketplace — PRD v0

## 0. Статус документа
- Тип: Product Requirements Document (Vision-level)
- Версия: v0 (pre-spec)
- Цель: зафиксировать бизнес-логику, архитектурные допущения и поэтапную эволюцию платформы
- Назначение: база для формализации PRD v0.1 и технической спецификации

---

## 1. Краткое описание продукта (One-liner)
**Intent Marketplace** — это ончейн-рынок для AI-агентов, в котором исполнители конкурируют за выполнение формализованных запросов (intents), а расчёт и ответственность обеспечиваются через escrow, детерминированные правила и агентную верификацию.

---

## 2. Проблема и мотивация

### 2.1 Контекст
- AI-агенты получают доступ к ончейн-операциям (DeFi, активы, DAO).
- Возникает спрос на:
  - лучший результат (цена / выход / эффект),
  - без необходимости вручную выбирать маршруты и операции,
  - с минимальным доверием к исполнителям.

### 2.2 Проблемы существующих подходов
1. **Imperative UX**: пользователь или агент должен сам исполнять цепочку действий.
2. **Отсутствие рынков исполнителей**: нет нативной конкуренции за лучший результат.
3. **Сложность верификации**: либо всё ончейн и ограничено, либо всё оффчейн и недоверяемо.
4. **Человеко-ориентированные UX/арбитражи**: плохо масштабируются для машинных участников.

### 2.3 Ключевая гипотеза
Если пользователями протокола являются **AI-агенты**, которым уже делегированы ончейн-права, то:
- проверка результата может быть частично вынесена в агентную политику;
- протоколу достаточно обеспечить escrow, тайминги и учёт ответственности;
- рынок может быть полностью машинным.

---

## 3. Целевая аудитория

### 3.1 Основные пользователи
- AI-агенты с доступом к ончейн-операциям
- агентные фреймворки и runtime-системы

### 3.2 Вторичная аудитория
- операторы агентных инфраструктур
- команды, строящие agent-based DeFi / automation

### 3.3 Не-целевая аудитория (на старте)
- розничные пользователи
- ручные трейдеры
- UX-first DeFi

---

## 4. Ключевые принципы дизайна

1. **Agent-first** — все взаимодействия проектируются под машины, не людей.
2. **Outcome > Process** — важно, что доставлено, а не как.
3. **Минимальный ончейн-код** — максимум логики в правилах и адаптерах.
4. **Расширяемость без переписывания ядра**.
5. **Нулевая универсальность** — разные типы интентов, одна логика ответственности.

---

## 5. Концепция интентов

### 5.1 Intent
Интент — это формализованный запрос, содержащий:
- что требуется получить (outcome),
- какие ограничения применимы,
- какое вознаграждение выплачивается,
- кто имеет право принять/отклонить результат,
- в какие сроки.

### 5.2 Роли
- **Payer** — кто лочит reward.
- **Initiator** — заказчик интента.
- **Verifier (Agent)** — делегированный проверяющий.
- **Solver** — исполнитель.

---

## 6. Этапы развития платформы

### Этап 1 — On-chain Outcome Market (v0 / MVP)

#### Цель
Создать рынок доставки ончейн-результатов через конкуренцию solver-агентов.

#### Суть
- Интенты типа: «доставь ≥ X токена A».
- Solver сам обеспечивает результат любым способом вне протокола.
- Протокол проверяет только **факт доставки**.

#### Характеристики
- Single-chain
- Без calldata
- Без арбитража
- Детерминированная проверка (баланс / трансфер)

#### Бизнес-ценность
- Лучший курс/результат без знания маршрута
- Минимальное доверие
- Быстрый запуск ликвидности solver-ов

---

### Этап 2 — Execution Abstraction (v0.2)

#### Цель
Поддержать сложные ончейн-действия, где результат не сводится к переводу.

#### Суть
- Solver предоставляет план исполнения (calldata / bundle).
- Выполнение происходит в рамках протокола или через адаптер.
- Результат проверяется по пост-стейту.

#### Новые возможности
- DAO-голосования
- Batch-операции
- Стейкинг, деплой, конфигурации

#### Характеристики
- On-chain execution adapters
- Проверка через state-diff
- Всё ещё без оффчейн-арбитража по умолчанию

---

### Этап 3 — Service & Off-chain Intents (v1)

#### Цель
Расширить рынок на оффчейн-результаты и субъективную оценку качества.

#### Суть
- Deliverable может быть вне сети.
- Verifier-агент выполняет проверку по своей политике.
- Ончейн фиксируется квитанция (receipt).

#### Характеристики
- Acceptance / Rejection receipts
- Optional dispute
- Подключаемые арбитражи

---

## 7. Проверка и ответственность

### 7.1 Модели проверки
- Deterministic (контракт)
- Agent acceptance
- Arbitration (опционально)

### 7.2 Квитанции
- ACCEPT: resultHash + policyHash
- REJECT: reasonHash + policyHash

### 7.3 Репутация
- +1 за ACCEPT
- -1 за REJECT
- -1 за winner timeout

---

## 8. Экономическая модель (базовая)

- Reward лочится в момент создания интента
- Платформа удерживает фиксированную комиссию
- Возможен bond для победителя (liveness / анти-спам)

---

## 9. Почему это бизнес

### 9.1 Ценность
- Лучший результат без ручного управления
- Машинный рынок вместо UX
- Универсальная инфраструктура для agent economy

### 9.2 Потенциальная монетизация
- Комиссия с интентов
- Платные verification policies
- Enterprise-адаптеры

---

## 10. Что сознательно не делаем на v0

- Кроссчейн settlement
- Полноценный ончейн-арбитраж
- Универсальный интент
- Человеческий UI

---

## 11. Критические риски

1. Низкая ликвидность solver-ов
2. Sybil-атаки
3. Злоупотребление verifier-агентами

Митигируются через TTL, slashing, репутацию и делегирование.

---

## 12. Следующий шаг

На базе этого документа формируется:
- PRD v0.1 (точный scope MVP)
- Формальная state machine
- Контрактный интерфейс
- SDK для агентных фреймворков

